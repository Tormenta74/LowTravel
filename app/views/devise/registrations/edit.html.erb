<%= render partial: 'layouts/navbar', locals: {navbar_offset: 70} %>

<%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
  <%= devise_error_messages! %>

  <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
    <div>Currently waiting confirmation for: <%= resource.unconfirmed_email %></div>
    <hr>
  <% end %>

  <div class="row single-column-row registrations edit">
    <h2>Editing profile <%= link_to current_user.name, current_user %></h2>
    <div class="col-md-4 col">
      <h3>Edit your data</h3>
      <div class="avatar-container">
        <img src="/assets/traveller-placeholder-300x300.jpg">
      </div>
      <table class="user-data">
        <tr>
          <td class="left"><%= f.label :email %></td>
          <td class="right"><%= f.email_field :email %></td>
        </tr>
        <tr>
          <td class="left"><%= f.label :name %></td>
          <td class="right "><%= f.text_field :name, :readonly => true, class: 'readonly' %></td>
        </tr>
        <tr>
          <td colspan="2" class="single-row">
            <small><em>Sorry, but your username cannot be changed</em></small>
          </td>
        </tr>
      </table>
    </div>

    <div class="col-md-4 col">
      <h3>About you</h3>
      <%= f.text_area :bio %><br>
      <%= f.label :webpage %><br>
      <%= f.text_field :webpage %><br>
    </div>

    <div class="col-md-4 col">
      <h3>Edit your password</h3>
      <table>
        <tr>
          <td class="left"><%= f.label :password, "New password" %></td>
          <td class="right"><%= f.password_field :password, autocomplete: "off" %></td>
        </tr>
        <tr>
          <td class="left"><%= f.label :password_confirmation, "Confirm new password" %></td>
          <td class="right"><%= f.password_field :password_confirmation, autocomplete: "off" %></td>
        </tr>
        <tr>
          <td colspan="2" class="single-row">
            <% if @minimum_password_length %>
              <em><%= @minimum_password_length %> characters minimum</em>
            <% end %>
          </td>
        </tr>
      </table>
      <div class="confirm well">
        <%= f.label :current_password, "We need your password to confirm:" %><br>
        <%= f.password_field :current_password, autocomplete: "off" %><br>
        <%= f.submit "Save changes" %>
      </div>
    </div>
  </div>
<% end %>
<hr>

<%# ------------------------------ %>

<div class="row single-column-row text-center cancel">
  <%= button_to "Cancel my account", registration_path(resource_name), data: { confirm: "This action cannot be undone. Do you want to continue?" }, method: :delete %>
</div>
